{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard â€” DeepTrust{% endblock %}

{% block content %}

<div class="px-6 py-12">

    <!-- Welcome Banner -->
    <div class="bg-gray-800 border border-gray-700 rounded-2xl p-8 mb-10">
        <h1 class="text-3xl font-bold text-blue-400">Welcome, {{ user.username }}</h1>
        <p class="text-gray-300 mt-2">Here's your recent DeepTrust activity.</p>

        <a href="{% url 'upload_form' %}"
           class="inline-block mt-6 bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-xl font-semibold text-white">
            Verify New Media
        </a>
    </div>

    <!-- Recent Jobs Section -->
    <h2 class="text-2xl font-bold text-gray-200 mb-4">Recent Verifications</h2>

    {% if jobs %}
        <div class="grid md:grid-cols-2 gap-6">

            {% for job in jobs %}
            <div class="bg-gray-800 border border-gray-700 p-6 rounded-xl">

                <div class="flex justify-between items-center mb-3">
                    <h3 class="text-lg font-bold text-blue-400">Job #{{ job.job_id }}</h3>

                    {% if job.status == "completed" %}
                        <span class="text-green-400 text-sm font-semibold">Completed</span>
                    {% else %}
                        <span class="text-yellow-400 text-sm font-semibold">Processing</span>
                    {% endif %}
                </div>

                <p class="text-gray-400 text-sm mb-3">
                    Media ID: {{ job.media_id }}
                </p>

                {% if job.status == "completed" %}
                    <p class="text-gray-300 mb-4">
                        TruthScore:
                        <span class="text-blue-400 font-bold">{{ job.truthscore }}%</span>
                    </p>
                {% endif %}

                <div class="flex justify-between mt-4">
                    {% if job.status == "processing" %}
                        <a href="{% url 'loading' job.job_id %}"
                           class="text-yellow-400 hover:underline">View Progress</a>
                    {% else %}
                        <a href="{% url 'report' job.job_id %}"
                           class="text-blue-400 hover:underline">View Report</a>
                    {% endif %}
                </div>

            </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="text-gray-500 text-lg">
            No verifications yet. Start by uploading your first media file!
        </p>
    {% endif %}

</div>

{% endblock %}
